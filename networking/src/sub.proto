syntax = "proto3";
import "rootsdk/types.proto";

service SubscriptionService {
  // Fetches available tiers from Patreon and SubscribeStar
  rpc GetTiers(rootsdk.Void) returns (TierList);
  // Saves the mapping of a platform tier to a Root Community role
  rpc SaveMapping(MappingRequest) returns (rootsdk.Void);
  rpc TriggerManualSync(rootsdk.Void) returns (rootsdk.Void);
}

message Tier {
  string id = 1;
  string name = 2;
  string provider = 3; // "patreon" or "substar"
}

message TierList {
  repeated Tier tiers = 1;
}

message MappingRequest {
  string tier_id = 1;
  string role_id = 2;
  string provider = 3;
}